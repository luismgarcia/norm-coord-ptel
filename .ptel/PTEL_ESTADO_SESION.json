{
  "version": "0.5.1",
  "lastUpdate": "2025-12-02T12:00:00Z",
  "currentPhase": {
    "id": 2,
    "name": "Sistema Adaptativo de Aprendizaje - Nivel 1",
    "progress": 100,
    "status": "completed",
    "details": "Nivel 1 completo: seedPatterns + quickProfiler + tests integridad. 44 tests pasando."
  },
  "activeWorkArea": "learning",
  "metrics": {
    "coordCompleteness": 26.9,
    "geocodingSuccess": 70,
    "parsingSuccess": 95,
    "precision_m": 50,
    "municipiosCovered": 7,
    "municipiosTotal": 785,
    "operationalCost_eur": 0,
    "testsCount": 111,
    "validationMeasures": 3,
    "documentsAnalyzed": 13,
    "coordsNormalized": 182,
    "patternsImplemented": 30,
    "notes": "Nivel 1 operativo con 9 patrones empíricos y 7 perfiles de municipio."
  },
  "targets": {
    "coordCompleteness": 95,
    "geocodingSuccess": 95,
    "parsingSuccess": 98,
    "precision_m": 25,
    "municipiosCovered": 785,
    "operationalCost_eur": 50
  },
  "areaStatus": {
    "normalization": {
      "status": "operational",
      "progress": 100,
      "lastWorked": "2025-12-02",
      "recentChanges": [
        "Fix normalizarTexto(): separadores → espacios (no eliminar)",
        "Detección mejorada de municipios desde nombres de archivo"
      ]
    },
    "validation": {
      "status": "operational",
      "progress": 100,
      "lastWorked": "2025-12-01"
    },
    "learning": {
      "status": "operational",
      "progress": 100,
      "lastWorked": "2025-12-02",
      "recentChanges": [
        "seedPatterns.ts: 9 patrones + 7 perfiles municipio",
        "quickProfiler.ts: Perfilador rápido adaptativo",
        "Tests integridad referencial (4 tests)",
        "44 tests Nivel 1 pasando"
      ],
      "pendingTasks": [
        "Integrar quickProfiler en UI (Step 2)",
        "Probar con documentos reales nuevos"
      ]
    },
    "geocoding": {
      "status": "stable",
      "progress": 87,
      "lastWorked": "2025-11-29"
    },
    "ui": {
      "status": "paused",
      "progress": 40,
      "lastWorked": "2025-11-30"
    },
    "parsing": {
      "status": "stable",
      "progress": 95,
      "lastWorked": "2025-11-30"
    },
    "ci": {
      "status": "operational",
      "progress": 100,
      "lastWorked": "2025-11-30"
    },
    "documentation": {
      "status": "updated",
      "progress": 100,
      "lastWorked": "2025-12-02"
    }
  },
  "lastSession": {
    "date": "2025-12-02",
    "role": "MapWizard",
    "area": "learning + testing",
    "summary": "Resolución de tests fallidos, unificación de repo, correcciones de INE, y creación de tests de integridad referencial.",
    "filesModified": [
      "src/lib/municipioDetector.ts (fix normalizarTexto)",
      "src/lib/__tests__/quickProfiler.test.ts (tests integridad + fix INEs)"
    ],
    "filesCreated": [
      ".ptel/LECCIONES_APRENDIDAS.md"
    ],
    "commits": [],
    "keyFixes": {
      "normalizarTexto": "Separadores (_-) ahora se convierten a espacios antes de eliminar caracteres especiales",
      "codigosINE": "Corregidos en tests: 18062→18051 (Colomera)",
      "testsIntegridad": "4 tests que validan consistencia entre MUNICIPIO_PROFILES y CENTROIDES_MUNICIPIOS"
    },
    "lessonsLearned": [
      "L1: Validar datos contra fuente autoritativa",
      "L2: Preservar estructura semántica al normalizar",
      "L3: Tests con múltiples casos edge",
      "L4: Ubicación canónica del repositorio",
      "L5: Tests de integridad referencial"
    ],
    "nextPriorities": [
      "Ejecutar todos los tests del proyecto",
      "Commit y push de cambios",
      "Integrar quickProfiler en UI"
    ]
  },
  "repoLocation": "~/Documents/GitHub/norm-coord-ptel/",
  "blockers": [],
  "notes": "Nivel 1 Sistema Adaptativo completo y validado. Tests de integridad previenen errores de datos futuros."
}
